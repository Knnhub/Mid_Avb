<header class="main-header">
  <div class="logo">
    <img src="assets/garena.png" alt="Garena Logo">
  </div>
  <nav class="main-nav">
    @if (isLoggedIn()) {
      <a href="#" (click)="logout()">ออกจากระบบ</a>
      <a href="#" (click)="showProfile()">โปรไฟล์</a>
      <a href="#" (click)="showHome()">รายการเกม</a>
    } @else {
      <a href="#" (click)="showLogin()">เข้าสู่ระบบ</a>
      <a href="#" (click)="showHome()">สมัครสมาชิก</a>
    }
  </nav>
</header>

<main>
  @if (showLoginScreen()) {
    <div class="login-page">
      <div class="login-card">
        <h2>เข้าสู่ระบบ</h2>
        <form (ngSubmit)="login()">
          <div class="form-group">
            <label for="email">อีเมล</label>
            <input type="email" id="email" [(ngModel)]="loginEmail" name="email" required>
          </div>
          <div class="form-group">
            <label for="password">รหัสผ่าน</label>
            <input type="password" id="password" [(ngModel)]="loginPassword" name="password" required>
          </div>
          <button type="submit">เข้าสู่ระบบ</button>
        </form>
        @if (loginError()) {
          <p class="error">{{ loginError() }}</p>
        }
        <div class="card-links">
          <a href="#" (click)="showHome()">สมัครสมาชิก</a>
          <a href="#" (click)="showHome()">กลับสู่หน้าหลัก</a>
        </div>
      </div>
    </div>
  } @else if (showProfileScreen()) {
    <div class="profile-page">
      @if (currentUser()) {
        <div class="profile-card">
          <img [src]="currentUser()!.image" [alt]="currentUser()!.fullname" class="profile-image">
          <h2>{{ currentUser()!.fullname }}</h2>
          <p><strong>อีเมล:</strong> {{ currentUser()!.email }}</p>
          <p><strong>บทบาท:</strong> {{ currentUser()!.role }}</p>
          <button (click)="showHome()">กลับสู่หน้าหลัก</button>
        </div>
      }
    </div>
  } @else if (showGameDetailScreen()) {
    <div class="game-detail-page">
      @if (selectedGame()) {
        <div class="game-detail-card">
          <img [src]="selectedGame()!.image" [alt]="selectedGame()!.name" class="game-detail-image">
          <h1>{{ selectedGame()!.name }}</h1>
          <p>{{ selectedGame()!.description }}</p>
          <a [href]="selectedGame()!.link" target="_blank">เว็บไซต์เกม</a>
          
          <div class="top-up-form">
            <h3>เติมเงินด่วน</h3>
            <form (ngSubmit)="topUp()">
              <div class="form-group">
                <label for="userId">ID ผู้ใช้</label>
                <input type="text" id="userId" [(ngModel)]="topUpUserId" name="userId" required>
              </div>
              <div class="form-group">
                <label for="amount">จำนวนเงิน (บาท)</label>
                <input type="number" id="amount" [(ngModel)]="topUpAmount" name="amount" required>
              </div>
              <button type="submit">เติมเงินด่วน</button>
            </form>
          </div>
          <button class="back-button" (click)="showHome()">กลับสู่หน้ารายการเกม</button>
        </div>
      }
    </div>
  } @else if (showNotFoundScreen()) {
    <div class="not-found-page">
      <div class="not-found-card">
        <h1>404</h1>
        <h2>ไม่พบหน้าเพจที่ต้องการ</h2>
        <p>ขออภัย, หน้าเพจที่คุณพยายามเข้าถึงไม่มีอยู่</p>
        <button (click)="showHome()">กลับสู่หน้าหลัก</button>
      </div>
    </div>
  } @else {
    <div class="game-list-container">
      @if (isLoggedIn() && currentUser()) {
        <h1 class="welcome-message">เกมแนะนำ</h1>
        <p class="greeting">สวัสดีคุณ {{ currentUser()!.fullname }}</p>
      }
      <div class="game-list">
        @for (game of games(); track game.id) {
          <div class="game-card" (click)="selectGame(game)">
            <img [src]="game.image" [alt]="game.name">
            <div class="game-info">
              <h3>{{ game.name }}</h3>
              <p>{{ game.description }}</p>
            </div>
          </div>
        }
      </div>
    </div>
  }
</main>